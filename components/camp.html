<div class="camp" data-camp-id="{{ camp ? camp.id : '' }}">
  {{#if camp}}
    <h3>{{ camp.title }}</h3>
    <p>{{ camp.description }}</p>

    <ul>
      {{#if userLocation && camp.location}}
        <li>Distance: {{ round(distance(camp.location, userLocation)) }}&nbsp;mi</li>
      {{/if}}
      <li>
        Price:
        ${{ camp.minPrice }}
        {{ camp.maxPrice && camp.maxPrice !== camp.minPrice ? ' - $' + camp.maxPrice : '' }}
      </li>
      <li>Start: {{ camp.start.toFormat('MMM dd') }}</li>
      <li>End: {{ camp.end.toFormat('MMM dd') }}</li>
      <li>Phone: {{ camp.phone }}</li>
      <li>Types: {{ camp.types.map(t => t.type).join(', ') }}</li>
      <li>
        For:
        {{ camp.who.type }}
        {{ camp.who.min }}-{{ camp.who.max }}
        {{ camp.who.entering ? '(Entering)' : ''}}
      </li>
    </ul>
  {{/if}}
</div>

<script>
import { distance } from '../app/common.js';

export default {
  helpers: {
    distance: function(location, userLocation) {
      if (location && location.lat && userLocation && userLocation.lat) {
        return distance(
          location.lat,
          location.lng,
          userLocation.lat,
          userLocation.lng
        );
      }
    },

    round: function(input, decimals = 1) {
      return (
        Math.round(input * Math.pow(10, decimals)) / Math.pow(10, decimals)
      );
    }
  }
};
</script>
